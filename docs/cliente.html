<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Conta - Da Horta Distribuidora</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Banner Header -->
    <div class="banner-header" onclick="goToHome()" style="cursor: pointer;" title="Clique para voltar  home">
        <img src="images/Header_da_horta.png" alt="Da Horta Distribuidora" class="banner-image">
    </div>

    <!-- Navigation Header -->
    <header class="main-header">
        <div class="header-content">
            <button class="menu-toggle" id="menuToggle" aria-label="Abrir menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <div class="header-actions">
                <button class="search-btn" id="searchBtn" aria-label="Buscar">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </button>
                
                <a href="carrinho.html" class="cart-btn" aria-label="Carrinho">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                    <span class="cart-badge" id="cartBadge">0</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Side Menu -->
    <nav class="side-menu" id="sideMenu">
        <div class="side-menu-header">
            <button class="menu-close" id="menuClose" aria-label="Fechar menu"></button>
        </div>
        <ul class="side-menu-list">
            <li><a href="index.html"> In铆cio</a></li>
            <li><a href="carrinho.html"> Carrinho</a></li>
            <li><a href="cliente.html" class="active"> Meus Pedidos</a></li>
            <li><a href="login.html"> Entrar</a></li>
        </ul>
    </nav>

    <!-- Menu Overlay -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- Search Modal -->
    <div class="search-modal" id="searchModal">
        <div class="search-modal-content">
            <input type="text" id="searchInput" placeholder="Buscar produtos..." class="search-input">
            <button class="search-close" id="searchClose"></button>
        </div>
        <div class="search-results" id="searchResults"></div>
    </div>

    <!-- Main Content -->
    <main class="container cliente-page">
        <div class="page-header">
            <h1>Minha Conta</h1>
            <p class="page-subtitle">Gerencie seus pedidos e hist贸rico</p>
        </div>

        <!-- Cliente Info -->
        <div class="cliente-info-card">
            <div class="info-row">
                <div class="info-item">
                    <span class="info-label">Nome:</span>
                    <span class="info-value" id="clienteName">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Empresa:</span>
                    <span class="info-value" id="clienteCompany">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">E-mail:</span>
                    <span class="info-value" id="clienteEmail">-</span>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('pedidos')" id="tabPedidos">
                Pedidos Ativos
            </button>
            <button class="tab-btn" onclick="switchTab('historico')" id="tabHistorico">
                Hist贸rico
            </button>
        </div>

        <!-- Pedidos Ativos -->
        <div class="tab-content active" id="contentPedidos">
            <div class="orders-list" id="ordersList">
                <!-- Pedidos ser茫o carregados aqui -->
            </div>
        </div>

        <!-- Hist贸rico -->
        <div class="tab-content" id="contentHistorico">
            <div class="orders-list" id="historyList">
                <!-- Hist贸rico ser谩 carregado aqui -->
            </div>
        </div>
    </main>

    <!-- API Scripts -->
    <script src="config.js"></script>
    <script src="api-client.js"></script>
    <script src="auth.js"></script>
    <script src="cliente.js"></script>
    <script>
        // Proteger p谩gina - apenas clientes
        requireAuth('cliente');
        
        // Toggle menu
        function toggleMenu() {
            const menu = document.getElementById('sideMenu');
            const overlay = document.getElementById('overlay');
            
            if (menu && overlay) {
                menu.classList.toggle('open');
                overlay.classList.toggle('show');
            }
        }
        
        // Atualizar badge do carrinho
        const cart = JSON.parse(localStorage.getItem('freshStoreCart')) || [];
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        document.getElementById('cartBadge').textContent = totalItems;
    </script>

    <!-- API Scripts -->
    <script src="config.js"></script>
    <script src="api-client.js"></script>
    <script src="auth.js"></script>
    <script src="cliente.js"></script>
    <script>
        // Ir para home
        function goToHome() {
            window.location.href = 'index.html';
        }

        // Menu Toggle
        document.addEventListener('DOMContentLoaded', () => {
            const menuToggle = document.getElementById('menuToggle');
            const menuClose = document.getElementById('menuClose');
            const menuOverlay = document.getElementById('menuOverlay');
            const sideMenu = document.getElementById('sideMenu');
            const searchBtn = document.getElementById('searchBtn');
            const searchModal = document.getElementById('searchModal');
            const searchClose = document.getElementById('searchClose');
            const searchInput = document.getElementById('searchInput');

            // Open menu
            menuToggle?.addEventListener('click', () => {
                sideMenu?.classList.add('active');
                menuOverlay?.classList.add('active');
            });

            // Close menu
            const closeMenu = () => {
                sideMenu?.classList.remove('active');
                menuOverlay?.classList.remove('active');
            };
            menuClose?.addEventListener('click', closeMenu);
            menuOverlay?.addEventListener('click', closeMenu);

            // Search modal
            searchBtn?.addEventListener('click', () => {
                searchModal?.classList.add('active');
                searchInput?.focus();
            });

            searchClose?.addEventListener('click', () => {
                searchModal?.classList.remove('active');
            });

            searchModal?.addEventListener('click', (e) => {
                if (e.target === searchModal) {
                    searchModal.classList.remove('active');
                }
            });

            // Search functionality
            searchInput?.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                const resultsDiv = document.getElementById('searchResults');
                
                if (!query || !resultsDiv) {
                    if (resultsDiv) resultsDiv.innerHTML = '';
                    return;
                }

                // Redirect to index with search
                window.location.href = `index.html?search=${encodeURIComponent(query)}`;
            });
        });
    </script>
</body>
</html>

